<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>e_trans_helpers2</title>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML" async>
  </script>
  
  <link href="lecture.css" rel="stylesheet">
  
  <link href="colorful.css" rel="stylesheet">
  

</head>
<body>
<div id="wrapper">
<div id="content">
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      For any integer polynomial $f$ and $n\in\mathbb N$ we define `deriv_n f n` to be the $n$-th derivative of polynomial $f$. $h^{[n]}$ means $h\circ h\circ h\cdots\circ h$ $n$-times.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">^</span><span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="n">f</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>the zeroth derivative of polynomial $f$ is $f$ itself.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">zeroth_deriv</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is purely definition of <code>deriv_n f n</code> We also used $f^{[n]}=\mathrm{id}$ and $\mathrm{id} x = x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">id</span><span class="bp">.</span><span class="n">def</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">f</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>the derivative of $f^{(n)}$ is $f^{(n+1)}$</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_succ</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">By definition and $h^{[n+1]}=h\circ h^{[n]}$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="o">[</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_succ&#39;</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>the $n$-th derivative of zero polynomial is $0$</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_zero_p</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv_n</span> <span class="mi">0</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove by induction. Base case and inductive case can all be done with <code>simp</code></span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">id</span><span class="bp">.</span><span class="n">def</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_zero</span><span class="o">],</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="mi">0</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>If the $n$-th coefficient of $f$ is $a_n$, then the $n$-th coefficient in $f^{(k)}$ is $\left(\prod_{i=0}^{k-1} (n+k-i)\right)a_{n+k}$</p>
<pre><code>
</code></pre>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_n_coeff</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">k</span><span class="bp">-</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="n">k</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">So we use induction on $k$</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">k</span> <span class="n">ih</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="mi">0</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For the zeroth derivative, $f^{(0)}=f$. This case is true by <code>simp</code>.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_zero</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">nat_zero_eq_zero</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range_zero</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_empty</span><span class="o">],</span> <span class="n">rw</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">forall_const</span><span class="o">,</span> <span class="n">id</span><span class="bp">.</span><span class="n">def</span><span class="o">,</span> <span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_zero</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="mi">0</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Let us assume our claim is true for $k$ and consider the $m$-th coefficient.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">intro</span> <span class="n">m</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We know that $f^{(k+1)}=\left(f^{(k)}\right)'$ and for any polynomial $g$, the $m$-th coefficient of $g'$ is $(m+1)\times (m+1)$-th coefficient of $g$. Then we can use induction hypothesis with $m+1$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="o">[</span><span class="n">deriv_n</span><span class="o">,</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_succ&#39;</span><span class="o">],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">function</span><span class="bp">.</span><span class="n">comp_app</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">],</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">deriv_n</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff_derivative</span><span class="o">,</span> <span class="n">rw</span> <span class="n">ih</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_range_succ</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_cast_eq_coe_nat</span><span class="o">],</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">The rest of the proves are trivial to a pair of human eyes. But we need to give computers some hint to solve this triviality.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="k">have</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">((</span><span class="n">m</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">=</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">sub_left_inj</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">triv</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="n">k</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">add_sub_assoc</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_sub_cancel&#39;</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span>
  <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span> <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">replace</span> <span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>

<span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">triv</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="err">↑</span><span class="n">k</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">i</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">triv</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">((</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="err">↑</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="err">↑</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">k</span><span class="bp">.</span><span class="n">succ</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>Like first derivative, higher derivatives still respect addition</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">deriv_n_add</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span><span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span><span class="bp">+</span><span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>For any polynomial $f$ with degree $d$, the $d+1$-th derivative is zero.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">deriv_too_much</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove that all coefficient of $f^{(d+1)}$ is zero.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">ext</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">We use lemma <code>deriv_n_coeff</code> and all coefficient of zero polynomial is $0$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">rw</span> <span class="n">deriv_n_coeff</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff_zero</span><span class="o">,</span> <span class="n">mul_eq_zero</span><span class="o">],</span> <span class="n">right</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Then the problem reduces to prove that $d+1$-th coeffcient of $f$ is zero. But $f$ has degree $d$. So we just need $d&lt;d+1$. This is proved by <code>linarith</code>.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">coeff_eq_zero_of_nat_degree_lt</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">f</span><span class="bp">.</span><span class="n">coeff</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>if $i+1\le n$ then $n-(i+1)+1=n-i$</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">private</span> <span class="kn">lemma</span> <span class="n">nat_sub_eq</span> <span class="o">(</span><span class="n">n</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">i</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>We have the pascal triangle</p>
<p>
\[{n\choose k+1}+{n\choose k} = {n+1\choose k+1}\]
</p>


	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span></span><span class="kn">private</span> <span class="kn">lemma</span> <span class="n">pascal_triangle</span> <span class="o">(</span><span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This is actually how <code>mathlib</code> defined binomial coefficient.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">exact</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">choose</span> <span class="n">n</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">choose</span> <span class="n">n</span> <span class="n">k</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>We also have that for $p,q\in\mathbb Z[x]$,</p>
<p>
\[
    (p\times q)^{(n)} = \sum_{i=0}^n\left({n\choose i}p^{(i)}q^{(n-i)}\right)    
\]

        




</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">deriv_n_poly_prod</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="err">∑</span> <span class="n">k</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="n">k</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove by induction on $n$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">IH</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">1</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For $n=0$, we are using <code>zeroth_deriv</code>.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zeroth_deriv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_self</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_singleton</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range_one</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="mi">1</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>

<span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">For inductive case We use $(pq)^{(n+1)}=d(pq)^{(n)}$, inductive hypothesis and that derivative is linear.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">deriv_n</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">iterate_succ&#39;</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">deriv_n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">case</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">IH</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_sum</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_mul</span><span class="o">,</span> <span class="n">zero_mul</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_C</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_sum</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_mul</span><span class="o">,</span> <span class="n">zero_mul</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">derivative_C</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">],</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">The rest of the proves is essentially openning and closing brackets and renaming summing indeces.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_add_distrib</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">+</span>
      <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">conv_lhs</span> <span class="o">{</span><span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ&#39;</span><span class="o">,</span> <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zeroth_deriv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_self</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_zero_right</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_zero</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_self</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C_1</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_zero</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">]},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span> <span class="bp">+</span>
      <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="k">have</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>          <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">rw</span> <span class="o">[</span><span class="n">eq</span><span class="o">,</span> <span class="bp">&lt;-</span><span class="n">finset</span><span class="bp">.</span><span class="n">sum_add_distrib</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>           <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>           <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_congr</span><span class="o">,</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">intros</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_succ</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">,</span> <span class="n">add_left_inj</span><span class="o">],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">]</span> <span class="n">at</span> <span class="n">hi</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">replace</span> <span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">hi</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">rw</span> <span class="n">nat_sub_eq</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hi</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span>
      <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
         <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
           <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
        <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
          <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
          <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">),</span>
<span class="n">i</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>           <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">))))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
           <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">funext_iff</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
          <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">funext_iff</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
         <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">replace</span> <span class="n">eq</span> <span class="o">:</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">=</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">(</span><span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">((</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">((</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">{</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>            <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span> <span class="n">rw</span> <span class="n">function</span><span class="bp">.</span><span class="n">funext_iff</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">&lt;-</span><span class="n">pascal_triangle</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_add</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="o">(</span><span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="o">},</span> <span class="n">rw</span> <span class="n">eq</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>        <span class="n">conv_rhs</span> <span class="o">{</span><span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ&#39;</span><span class="o">,</span> <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_range_succ</span><span class="o">},</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">deriv_succ</span><span class="o">,</span> <span class="n">zeroth_deriv</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_self</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom</span><span class="bp">.</span><span class="n">eq_int_cast</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_sub_succ_eq_sub</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">choose_zero_right</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_zero</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_self</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_succ</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_zero</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">IH</span> <span class="o">:</span>
  <span class="n">deriv_n</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span><span class="o">,</span>
<span class="n">eq</span> <span class="o">:</span>
  <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">choose</span> <span class="n">x</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">∑</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
        <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span>
        <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">choose</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span>
      <span class="o">((</span><span class="n">deriv_n</span> <span class="n">p</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">q</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span><span class="o">)</span> <span class="bp">=</span>
    <span class="err">∑</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="k">in</span>
      <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span>
      <span class="err">⇑</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="err">↑</span><span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span><span class="bp">.</span><span class="n">choose</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">p</span> <span class="o">(</span><span class="n">n</span><span class="bp">.</span><span class="n">succ</span> <span class="bp">-</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">deriv_n</span> <span class="n">q</span> <span class="n">k</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>For a polynomial $f$ then if $n&gt;0$, we have $f^{(n)}=f^{(n-1)\times f'}$</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">poly_pow_deriv</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">derivative</span> <span class="bp">=</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">))</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="mi">1</span><span class="o">))</span> <span class="bp">*</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">destruct h1,</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="bp">@</span><span class="n">measure_theory</span><span class="bp">.</span><span class="n">integral_le_integral</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="o">(</span><span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measurable</span><span class="bp">.</span><span class="k">if</span><span class="o">,</span> <span class="n">apply</span> <span class="n">is_measurable_Icc</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">6</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">dsimp</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">measurable_zero</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">6</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span><span class="bp">.</span><span class="n">integrable_on</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measurable</span><span class="bp">.</span><span class="k">if</span><span class="o">,</span> <span class="n">apply</span> <span class="n">is_measurable_Icc</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">measurable_zero</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measurable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">apply</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span><span class="bp">.</span><span class="n">integrable_on</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">goals</span>
<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="o">((</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span><span class="o">)</span>

<span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre><span></span>    <span class="n">intros</span> <span class="n">c</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">indicator</span><span class="o">],</span> <span class="n">split_ifs</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">hf</span> <span class="n">c</span> <span class="bp">⟨</span><span class="n">h_1</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">h_1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="mi">0</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measurable</span> <span class="n">g</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">integrable</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span>
<span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">f</span> <span class="n">a_1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">indicator</span> <span class="n">g</span> <span class="n">a_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      Suppose $f$ is an integer polynomial with degree $n$ and $t\ge0$ then define
    \[I(f,t):=\int_0^t \exp(t-x)f(z)\mathrm{d}x\]
We use integration by parts to prove
    \[I(f,t)=\exp(t)\left(\times\sum_{i=0}^n f^{(i)}(0)-\sum_{i=0}^n f^{(i)}(t)\right)\]

The two different ways of representing $I(f,t)$ we give us upper bound and lower bound when we are using this on transcendence of $e$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span></span><span class="n">def</span> <span class="n">I</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="o">:=</span> 
    <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">-</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">f</span><span class="bp">.</span><span class="n">nat_degree</span><span class="bp">.</span><span class="n">succ</span><span class="o">,</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="n">t</span><span class="o">))</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$\int_0^0$ is 0.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_0</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">II</span> <span class="mi">0</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>By integration by part we have:</p>
<p>
\[I(f, t) = e^tf(0)-f(t)+I(f',t)\]
</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_integrate_by_part</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> 
    <span class="o">(</span><span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">real</span><span class="bp">.</span><span class="n">exp</span> <span class="n">t</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">t</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">II</span> <span class="n">f</span><span class="bp">.</span><span class="n">derivative</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Combine the theorem above with induction we get for all $m\in\mathbb N$</p>
<p>
\[
I(f,t)=e^t\sum_{i=0}^m f^{(i)}(0)-\sum_{i=0}^m f^{(i)}(t)
\]

</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_integrate_by_part_m</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="n">t</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">-</span> <span class="o">(</span><span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">f_eval_on_ℝ</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">II</span> <span class="o">(</span><span class="n">deriv_n</span> <span class="n">f</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>So the using if $f$ has degree $n$, then $f^{(n+1)}$ is zero we have the two definition of $I(f,t)$ agrees.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">II_eq_I</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="bp">=</span> <span class="n">I</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>
\[\left|I(f,t)\right|\le \int_0^t \left|e^{t-x}f(x)\right|\mathrm{d}x\]



</p>


	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">abs_II_le1</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="n">II</span> <span class="n">f</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">set</span><span class="bp">.</span><span class="n">Icc</span> <span class="mi">0</span> <span class="n">t</span><span class="o">,</span> <span class="n">abs</span> <span class="o">((</span><span class="n">t</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">exp</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f_eval_on_ℝ</span> <span class="n">f</span> <span class="n">x</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
</div>
<div id="dragbar"></div>
<div id="tactic_state_wrapper">
  <h1 id="tactic_state_header">Tactic state</h1>
<div id="tactic_state">
</div>
</div>
</div>

<script src="jquery.min.js" type="text/javascript"></script>

<script src="jquery.min.js" type="text/javascript"></script>

<script src="lean.js" type="text/javascript"></script>

</body>
</html>
